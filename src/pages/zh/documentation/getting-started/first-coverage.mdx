# ä¸ŠæŠ¥ç¬¬ä¸€ä¸ªè¦†ç›–ç‡

ä¸€æ­¥æ­¥æ•™ä½ å¦‚ä½•ä¸ŠæŠ¥ç¬¬ä¸€ä¸ªè¦†ç›–ç‡

## ä»£ç æ’æ¡©

å‰ç«¯å·¥ç¨‹åŒ–ã€æ¨¡å—åŒ–ç¦»ä¸å¼€babelã€‚å¦‚æœè¯´ä½ çš„é¡¹ç›®æ˜¯çš„è¯ï¼Œåªéœ€è¦å®‰è£…ä¸¤ä¸ªbabelæ’ä»¶å³å¯å¿«é€Ÿå¼€å§‹ï¼Œ
[`babel-plugin-istanbul`](https://github.com/istanbuljs/babel-plugin-istanbul) æ˜¯istanbulå®˜æ–¹ç»´æŠ¤çš„babelæ’ä»¶ã€‚
[`babel-plugin-canyon`](https://github.com/canyon-project/babel-plugin-canyon) æˆ‘ä»¬æ˜¯ä¸ºäº†ä¾¿äºç”¨æˆ·é…ç½®é¡¹ç›®ä¿¡æ¯çš„babelæ’ä»¶ã€‚

### å®‰è£…

```shell copy
npm i babel-plugin-istanbul babel-plugin-canyon -D
```

### é…ç½®

åœ¨[babel](https://babeljs.io/docs/config-files#configuration-file-types)ä¸­é…ç½®
```json
{
  "plugins": [
    "istanbul",
    "canyon"
  ]
}
```

babelå®‰è£…å®Œæˆåå¯åŠ¨é¡¹ç›®ï¼Œåœ¨æ§åˆ¶æ‰“å°**window.\_\_canyon\_\_**ä¸**window.\_\_coverage\_\_**ã€‚å¦‚æœè·Ÿä¸‹å›¾ä¸€æ ·é‚£ä¹ˆæ­å–œä½ ï¼Œä»£ç æ’æ¡©æˆåŠŸã€‚

import LocalizedLink from "../../../../components/LocalizedLink";

<Callout emoji="ğŸ’¡">
  æœ¬åœ°å¼€å‘ç¯å¢ƒä¸‹Canyonä¸‹çš„å˜é‡æ˜¯ä¸ä¼šå­˜åœ¨çš„ï¼Œåªæœ‰åœ¨CIç¯å¢ƒä¸­æ‰ä¼šå¯¹ç¯å¢ƒå˜é‡è¿›è¡Œä¾¦æµ‹ã€‚

  1. æ›´å¤š <LocalizedLink href={'/documentation/ecosystem/babel-plugin-canyon'}>babel-plugin-canyon</LocalizedLink> é…ç½®æ–¹æ³•ã€‚

  2. å„Canyonå˜é‡çš„å«ä¹‰å¯æŸ¥çœ‹ <LocalizedLink href={'/documentation/reference/api'}>å˜é‡è¯´æ˜</LocalizedLink>ã€‚
</Callout>

![coverage-canyon-console](/static/documentation/getting-started/first-coverage/coverage-canyon-console.png)



## æ„å»ºæ—¶ç¯å¢ƒå˜é‡é…ç½®

åœ¨CIç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œç”¨äºä¸ŠæŠ¥è¦†ç›–ç‡æ•°æ®ã€‚

### è·å–DSNä¸REPORTER

- DSN: Canyonæä¾›çš„ä¸ŠæŠ¥æ¥å£ï¼Œ\{\{url\}\}/coverage/clientï¼Œå…¶ä¸­urlä¸ºCanyonåç«¯æœåŠ¡åœ°å€ã€‚
- REPORTER: ç”¨æˆ·tokenï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„ç”¨æˆ·ã€‚å¯å‰å¾€ç”¨æˆ·è®¾ç½®é¡µæŸ¥çœ‹ã€‚

![setting](/static/documentation/getting-started/first-coverage/setting.png)

### CIå¹³å°å˜é‡é…ç½®

![gitlab](/static/documentation/getting-started/first-coverage/gitlab-var-config.png)

import { Callout } from 'nextra/components'

<Callout type="info" emoji="â„¹ï¸">
  å…¶ä¸­Branchã€SHAã€Project IDä¸éœ€è¦é…ç½®ï¼Œä¼šè‡ªåŠ¨è¯»å–ç¯å¢ƒå˜é‡ã€‚æˆ‘ä»¬å·²ç»é€‚é…äº†gitlab pipelineã€github actionç­‰CIå¹³å°ã€‚
  å…·ä½“å¯æŸ¥çœ‹ <LocalizedLink href={'/documentation/reference/supported-ci-providers'}>æ”¯æŒçš„provideråˆ—è¡¨</LocalizedLink>ã€‚
</Callout>






## æµ‹è¯•ä¸ä¸ŠæŠ¥

### UIè‡ªåŠ¨åŒ–

ä½¿ç”¨è€…å¯ä»¥ä½¿ç”¨ä»»ä½•UIè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œå¦‚cypressã€playwrightã€puppeteerã€seleniumç­‰ã€‚åªéœ€è¦åœ¨æµ‹è¯•ç»“æŸåï¼Œå°†è¦†ç›–ç‡æ•°æ®ä¸ŠæŠ¥å³å¯ã€‚

å…·ä½“å¯å‚è€ƒ
<LocalizedLink href={'/documentation/end-to-end-testing/playwright'}>UIè‡ªåŠ¨åŒ–æµ‹è¯•</LocalizedLink>
ã€‚


### æ‰‹å·¥ä¸ŠæŠ¥

Chromeæµè§ˆå™¨å¯ä»¥ä½¿ç”¨Chromeæ’ä»¶[canyon-extension](https://chromewebstore.google.com/detail/canyon-extension/omnpafdjidgpdmlimbangcjjaaodbeof?hl=zh-CN&utm_source=ext_sidebar)æ‰‹å·¥ä¸ŠæŠ¥è¦†ç›–ç‡æ•°æ®ã€‚

![chrome-crx](/static/documentation/getting-started/first-coverage/chrome-crx.png)

## æŠ¥å‘ŠæŸ¥çœ‹

Canyonæä¾›äº†ä¸°å¯Œçš„æŠ¥å‘Šï¼Œå¯ä»¥æŸ¥çœ‹è¦†ç›–ç‡çš„æ‘˜è¦ä¸è¦†ç›–è¯¦æƒ…ã€‚

### æ‘˜è¦

![report-overview](/static/documentation/getting-started/first-coverage/report-overview.png)

### è¯¦æƒ…

![report-detail](/static/documentation/getting-started/first-coverage/report-detail.png)
